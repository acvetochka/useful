# Конспект по Bash скриптам

## 1. Що таке Bash скрипт
Bash скрипт — це текстовий файл, який містить послідовність команд, що виконуються оболонкою Bash у Linux/Unix системах. Сценарії використовуються для автоматизації задач, керування системою та написання програм.

## 2. Створення та виконання Bash скриптів
Створення скрипта: Використовуйте будь-який текстовий редактор (наприклад, nano, vim):
```bash
nano script.sh
```
Шебанг: Кожен скрипт повинен починатися з шебанга, щоб вказати інтерпретатор:
```bash
#!/bin/bash
```
Виконання скрипта:
- Надати права на виконання:
```bash
chmod +x script.sh
```
- Запустити скрипт:
```bash
./script.sh
```

## 3. Змінні
Оголошення змінних:

```bash
my_var="Hello, World"
```

Щоб використовувати змінну, ставте перед її назвою символ $:

```bash
echo $my_var
```

Отримання змінної з аргументу командного рядка:

```bash
$1, $2, ...  # доступ до аргументів
```

## 4. Основні команди
- Ехо для виведення:

```bash
echo "Text to output"
```

Операції з файлами:

- Створити порожній файл:
```bash
touch filename.txt
```

- Переміщення/перейменування файлу:
```bash
mv oldname.txt newname.txt
```

- Копіювання файлу:
```bash
cp file.txt /destination/
```

## 5. Цикли
- `for`:

```bash
for item in list; do
  # команди
done
```
Приклад:

```bash
for i in {1..5}; do
  echo "Number: $i"
done
```

- `while`:

```bash
while [ condition ]; do
  # команди
done
```

- `until`: Виконується, поки умова хибна:

```bash
until [ condition ]; do
  # команди
done
```

## 6. Умовні оператори
- if-else:

```bash
if [ condition ]; then
  # команди
elif [ condition ]; then
  # команди
else
  # команди
fi
```
Приклад:

```bash
if [ -f myfile.txt ]; then
  echo "File exists"
else
  echo "File does not exist"
fi
```

- Оператори порівняння для чисел
  
`-eq` (дорівнює) - Використовується для порівняння двох чисел на рівність.

```bash
num1=5
num2=5
if [ $num1 -eq $num2 ]; then
  echo "Числа рівні"
else
  echo "Числа не рівні"
fi
```

`-ne` (не дорівнює) - Використовується для перевірки, чи два числа не рівні.

```bash
num1=5
num2=10
if [ $num1 -ne $num2 ]; then
  echo "Числа не рівні"
else
  echo "Числа рівні"
fi
```

`-gt` (більше ніж) - Перевіряє, чи одне число більше іншого.

```bash
num1=10
num2=5
if [ $num1 -gt $num2 ]; then
  echo "$num1 більше ніж $num2"
fi
```

`-lt` (менше ніж) - Перевіряє, чи одне число менше іншого.

```bash
num1=3
num2=8
if [ $num1 -lt $num2 ]; then
  echo "$num1 менше ніж $num2"
fi
```

`-ge` (більше або дорівнює) - Використовується для перевірки, чи одне число більше або дорівнює іншому.

```bash
num1=5
num2=5
if [ $num1 -ge $num2 ]; then
  echo "$num1 більше або дорівнює $num2"
fi
```

`-le` (менше або дорівнює) - Використовується для перевірки, чи одне число менше або дорівнює іншому.

```bash
num1=3
num2=10
if [ $num1 -le $num2 ]; then
  echo "$num1 менше або дорівнює $num2"
fi
```

- Оператори порівняння для рядків
  
`=` (рядки рівні) - Використовується для перевірки, чи два рядки ідентичні.

```bash
str1="apple"
str2="apple"
if [ "$str1" = "$str2" ]; then
  echo "Рядки рівні"
else
  echo "Рядки не рівні"
fi
```

`!=` (рядки не рівні) - Перевіряє, чи два рядки не ідентичні.

```bash
str1="apple"
str2="orange"
if [ "$str1" != "$str2" ]; then
  echo "Рядки не рівні"
fi
```

`-z` (порожній рядок) - Перевіряє, чи рядок є порожнім.

```bash
str=""
if [ -z "$str" ]; then
  echo "Рядок порожній"
fi
```

`-n` (не порожній рядок) - Перевіряє, чи рядок не порожній.

```bash
Копіювати код
str="hello"
if [ -n "$str" ]; then
  echo "Рядок не порожній"
fi
```

## 7. Функції
Функції в Bash використовуються для організації коду в блоки, які можна викликати кілька разів.

```bash
function_name() {
  # команди
}
```

Приклад:

```bash
greet() {
  echo "Hello, $1!"
}
greet "World"  # Виведе "Hello, World!"
```

## 8. Редирекція та канали
- Перенаправлення виводу:

`>` — перезапис файлу:
```bash
echo "text" > file.txt
```

`>>` — додавання до файлу:

```bash
echo "more text" >> file.txt
```

- Перенаправлення помилок:

`2>` — перенаправлення стандартного потоку помилок:

```bash
command 2> errors.log
```

- Канали (`|`) — передача результату однієї команди як вхід для іншої:

```bash
command1 | command2
```

## 9. Корисні команди Bash
`grep` — пошук по тексту:

```bash
grep "pattern" file.txt
```

`cut` — витягує частини рядка:

Синтаксис:

```bash
cut [опції] [файл]
```

Приклад:
```bash
cut -d ',' -f 1 file.txt
```

Типові прапори:

`-d` 'роздільник': Визначає, який символ використовувати для розділення рядків на поля.
`-f n`: Вибирає одне або кілька полів (можна вказати кілька, наприклад -f 1,3 для вибору першого і третього поля).
`-c n`: Вибирає символи за їхніми позиціями, наприклад -c 1-5 вибере перші 5 символів з кожного рядка.
`--complement`: Вибирає всі поля, окрім вказаних.

Інші приклади використання cut

- Вибір кількох полів:

```bash
cut -d ',' -f 1,3 file.txt
```
Ця команда витягне перше та третє поле з кожного рядка файлу file.txt.

- Вибір діапазону полів:

```bash
cut -d ',' -f 2-4 file.txt
```
Ця команда витягне друге, третє та четверте поля з кожного рядка.

- Вибір символів:

```bash
cut -c 1-5 file.txt
```
Ця команда витягне перші 5 символів з кожного рядка файлу file.txt.

`find` — пошук файлів:

Синтаксис команди
```bash
find [шлях] [опції] [критерії]
```

Приклад: 
```bash
find /path -name "file.txt"
```

Пояснення кожного компонента

`/path`:

Це шлях, де буде виконуватися пошук. Ви можете вказати абсолютний шлях (наприклад, /home/user/documents) або відносний шлях (наприклад, documents, якщо ви знаходитесь у каталозі home/user).
У даному випадку /path означає, що пошук буде здійснюватися в каталозі, що знаходиться за цим шляхом та у всіх його підкаталогах.

`-name "file.txt"`:

Це опція і критерій, які вказують, які файли слід шукати.

`-name`: ця опція дозволяє шукати файли за їхньою назвою.

`"file.txt"`: це шаблон для назви файлу, який ви шукаєте. У цьому випадку, команда шукає точну відповідність файлу з ім’ям file.txt.

Якщо ви виконаєте команду:
```bash
find /home/user/documents -name "file.txt"
```
Це знайде всі файли з ім’ям `file.txt`, які знаходяться у каталозі documents і всіх його підкаталогах.

Додаткові параметри

`-iname "file.txt"`: якщо ви хочете зробити пошук нечутливим до регістру, можна використати -iname замість -name. Це знайде file.txt, File.txt, FILE.TXT тощо.

`-type f`: щоб шукати тільки файли (не каталоги), ви можете додати -type f:

```bash
find /path -type f -name "file.txt"
```

## 10. Коментарі

- Однорядкові коментарі:
```bash
# Це коментар
```

## 11. Режими налагодження
Режим налагодження скрипта (виводить всі команди перед їх виконанням):
```bash
bash -x script.sh
```

## 12. Обробка помилок
Команда trap використовується для виконання певних дій при виникненні помилки або сигналу:
```bash
trap 'echo "An error occurred."' ERR
```

## 13. Корисні оператори
`&&` — виконує другу команду, якщо перша успішна:
```bash
command1 && command2
```

`||` — виконує другу команду, якщо перша не вдалася:
```bash
command1 || command2
```

Цей конспект охоплює основи Bash скриптів, що дозволяють автоматизувати завдання в Linux-системах.
