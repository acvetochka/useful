# Handlers in Python
Конспект по обробникам в Python

Обробники або handlers у Python — це механізм, що дозволяє керувати потоком даних та подіями у програмах. Вони широко використовуються в різних сценаріях, зокрема для обробки виключень, логування, обробки файлів та подій у бібліотеках, таких як logging, signal, та робота з файлами.

## 1. Обробка виключень (Exception Handling)
Обробка виключень — це механізм, що дозволяє обробляти помилки або незвичайні ситуації, які виникають під час виконання програми. Це виконується за допомогою блоків try-except.

**Приклад:**
```python
try:
    result = 10 / 0  # Потенційна помилка ділення на нуль
except ZeroDivisionError:
    print("Помилка: ділення на нуль!")
```
У цьому прикладі виключення ZeroDivisionError обробляється блоком except, і програма продовжує виконання.

**Структура блоків:**

- `try`: Виконує блок коду, що може викликати винятки.
- `except`: Обробляє виняток, що виник у блоці try.
- `else`: Виконується, якщо не було винятків.
- `finally`: Виконується завжди, незалежно від того, виникли винятки чи ні (наприклад, для закриття ресурсів).

**Розширена обробка винятків:**

Обробка кількох типів винятків:
```python
try:
    num = int(input("Введіть число: "))
    result = 10 / num
except ValueError:
    print("Помилка: введено не число!")
except ZeroDivisionError:
    print("Помилка: ділення на нуль!")
```

## 2. Логування (Logging Handlers)
Обробники логів використовуються для налаштування того, куди і як зберігати повідомлення логування. У модулі logging можна використовувати різні типи обробників для виведення логів у файл, на екран, або відправки по мережі.

**Основні обробники:**
- `StreamHandler`: Виводить лог-повідомлення на консоль.
- `FileHandler`: Записує повідомлення у файл.
- `RotatingFileHandler`: Записує лог у файл з обмеженим розміром, створюючи новий файл при перевищенні цього розміру.
- `SMTPHandler`: Надсилає повідомлення логів по email.
- `SysLogHandler`: Відправляє логи на сервер системних логів.

**Приклад використання обробника FileHandler:**
```python
import logging

# Налаштування логування
logger = logging.getLogger('example_logger')
logger.setLevel(logging.DEBUG)

# Створення обробника для запису логів у файл
file_handler = logging.FileHandler('example.log')
file_handler.setLevel(logging.ERROR)

# Форматування логів
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
file_handler.setFormatter(formatter)

# Додавання обробника до логера
logger.addHandler(file_handler)

# Приклад логування
logger.error('Це повідомлення про помилку')
```

## 3. Обробка сигналів (Signal Handlers)
Python дозволяє обробляти сигнали операційної системи за допомогою модуля signal. Це корисно для обробки подій, таких як натискання клавіш або сигнали завершення програми.

**Приклад обробки сигналу завершення:**
```python
import signal
import sys

# Функція для обробки сигналу завершення (Ctrl+C)
def signal_handler(sig, frame):
    print('Завершення програми...')
    sys.exit(0)

# Призначення обробника для сигналу SIGINT (Ctrl+C)
signal.signal(signal.SIGINT, signal_handler)

print('Натисніть Ctrl+C для завершення')
signal.pause()
```

Цей код чекає на натискання Ctrl+C, після чого викликається функція signal_handler.

## 4. Обробка файлів (File Handlers)
Python надає кілька методів для обробки файлів, включаючи роботу з файлами на запис, читання та закриття файлів.

**Основні методи:**
- `open()`: Відкриває файл для читання або запису.
- `read()` / `readline()` / `readlines()`: Читає вміст файлу.
- `write()` / `writelines()`: Записує дані у файл.
- `close()`: Закриває файл після завершення роботи.

**Приклад обробки файлу:**
```python
# Відкриття файлу для запису
with open('example.txt', 'w') as file:
    file.write("Hello, World!")
```
Функція with автоматично закриває файл після виконання блоку коду.

## 5. Власні обробники подій (Custom Event Handlers)
У Python можна створювати власні обробники подій. Це корисно в ситуаціях, коли потрібно реагувати на певні події в програмі.

**Приклад створення обробника подій:**
```python
class Event:
    def __init__(self):
        self.handlers = []

    def register(self, handler):
        self.handlers.append(handler)

    def trigger(self, data):
        for handler in self.handlers:
            handler(data)

# Створення події
event = Event()

# Реєстрація обробника події
event.register(lambda data: print(f"Подія отримала: {data}"))

# Виклик події
event.trigger("Hello!")
```
Тут створюється клас Event, що дозволяє реєструвати обробники подій і викликати їх з передачею даних.

Висновки:
Обробники в Python — це потужний механізм для керування різними аспектами програми, такими як обробка виключень, робота з файлами, логування та реакція на сигнали операційної системи. Вони дозволяють створювати більш стабільні та керовані програми, полегшуючи керування ресурсами та подіями.
