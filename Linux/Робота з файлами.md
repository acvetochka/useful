# Робота з файлами

## Зміст

[Розділ 1: Робота з деревом файлів]()
  - [1.1. pwd (Print Working Directory)]()
  - [1.2. cd (Change Directory)]()
  - [1.3. ls (List)]()
  - [1.4. mkdir (Make Directory)]()
  - [1.5. cp (Copy)]()
  - [1.6. mv (Move)]()
  - [1.7. rm (Remove)]()
  - [1.8. tree]()
  - [1.9. Використання метасимволів (Wildcards)]()
  - [1.10. Розширення фігурних дужок (Brace Expansion)]()
  - [1.11. Спеціальні випадки та комбінації]()
  - [1.12. Перевірка дискового простору в дереві]()


## Розділ 1: Робота з деревом файлів

У цьому розділі ми розглянемо основні утиліти: `pwd`, `cd`, `ls`, `mkdir`, `rmdir`, `cp`, `mv`, `rm` та `tree`.

### 1.1. pwd (Print Working Directory)
Показує повний абсолютний шлях до поточної директорії, в якій знаходиться користувач.

Аргументи:
- `-L` (Logical): Використовувати шлях з оточення, навіть якщо він містить символічні посилання (типово).
- `-P` (Physical): Уникати символічних посилань і показувати реальний фізичний шлях на диску.

Приклад:

- `pwd` — результат: `/home/user/documents`
- `pwd -P` — якщо ви в папці-посиланні, покаже справжню адресу папки.


### 1.2. cd (Change Directory)
Команда для переміщення між директоріями.

Спеціальні символи:
- `cd ~` або просто `cd` — перехід у домашню директорію користувача.
- `cd ..` — перехід на один рівень вгору.
- `cd -` — повернення до попередньої директорії (аналог кнопки "Назад").
- `cd /` — перехід у корінь системи.

Приклад:
- `cd /var/log` — перехід за абсолютном шляхом.
- `cd ./projects` — перехід у папку projects всередині поточної.

### 1.3. ls (List)
Виводить список файлів та підкаталогів. Одна з найбільш вживаних команд.

Аргументи:
- `-l` (long): Детальний список (права доступу, власник, розмір, дата).
- `-a` (all): Показувати приховані файли (ті, що починаються з крапки .).
- `-h` (human-readable): Відображати розмір файлів у зрозумілих одиницях (КБ, МБ, ГБ).
- `-R` (recursive): Рекурсивний вивід усіх підпапок.
- `-t` (time): Сортувати за часом останньої зміни.
- `-S`: Сортувати за розміром.

Приклад:
- `ls -lah` — вивести абсолютно всі файли з детальною інформацією у зручному форматі.
- `ls -lt /etc` — подивитися останні змінені конфігураційні файли.

### 1.4. mkdir (Make Directory)
Створення нових папок.

Аргументи:
- `-p` (parents): Створює весь ланцюжок вкладених папок, якщо вони не існують.
- `-m` (mode): Встановити права доступу (chmod) відразу при створенні.

Приклад:
- `mkdir project` — створення папки в поточній директорії.
- `mkdir -p site/assets/images` — створить три папки одну в одній одним махом.
- `mkdir -m 777 public_folder` — створить папку з повним доступом для всіх.

### 1.5. cp (Copy)
Копіювання файлів та директорій.

Аргументи:
- `-r` або `-R` (recursive): Обов'язковий для копіювання папок з їхнім вмістом.
- `-i` (interactive): Питати підтвердження перед перезаписом.
- `-u` (update): Копіювати тільки якщо вихідний файл новіший за існуючий.
- `-p` (preserve): Зберегти атрибути файлу (час, права доступу).

Приклад:
- `cp file.txt backup.txt` — копіювання файлу.
- `cp -r /home/user/work /media/usb/` — копіювання всієї папки на флешку.

### 1.6. mv (Move)
Переміщення або перейменування файлів та папок.

Аргументи:
- `-i` (interactive): Запит на підтвердження перед заміною.
- `-n` (no-clobber): Не перезаписувати існуючі файли.
- `-v` (verbose): Показувати, що саме відбувається в процесі.

Приклад:
- `mv old_name.txt new_name.txt` — перейменування.
- `mv document.pdf ~/Documents/` — переміщення у вказану папку.

### 1.7. rm (Remove)
Видалення файлів та директорій. Обережно: в терміналі немає "Кошика"!

Аргументи:
- `-r` (recursive): Видалення папки та всього її вмісту.
- `-f` (force): Видалити без запитів ігноруючи помилки.
- `-i`: Питати дозвіл перед кожним видаленням.

Приклад:
- `rm script.sh` — видалення файлу.
- `rm -rf project_folder` — повне видалення папки без зайвих питань (використовувати вкрай обережно).

### 1.8. tree
Візуалізація дерева файлів.

Аргументи:
- `-L [depth]`: Обмежити глибину відображення (наприклад, -L 2).
- `-d`: Показувати тільки директорії, ігнорувати файли.
- `-f`: Показувати повний шлях для кожного файлу.

Приклад:
- `tree -L 2` — покаже структуру папок на два рівні вглиб.

Додаємо критично важливий пласт знань про метасимволи (wildcards), дужки та спеціальні оператори, які роблять роботу з деревом файлів у десятки разів швидшою. Без них робота в терміналі — це просто заміна мишки; з ними — це автоматизація.

### 1.9. Використання метасимволів (Wildcards)
Це спеціальні символи, які дозволяють виконувати операції над групами файлів, що відповідають певному шаблону.
- `*` (Зірочка): Замінює будь-яку кількість символів (навіть нуль).

  - `ls *.txt` — показати всі текстові файли.
  - `rm -f temp_*` — видалити всі файли, що починаються на "temp_".
  - `cp *.jpg ~/Photos/` — скопіювати всі зображення в папку Photos.
- `?` (Знак питання): Замінює рівно один будь-який символ.
  - `ls file?.log` — знайде `file1.log`, `fileA.log`, але не `file10.log`.
- `[ ]` (Квадратні дужки): Визначають діапазон або набір символів.
  - `ls file[1-3].txt` — знайде file1.txt, file2.txt, file3.txt.
  - `ls [a-z]*.doc` — знайде всі документи, що починаються з малої літери.
  - `ls *.[ch]` — знайде всі файли вихідного коду C (.c або .h).

### 1.10. Розширення фігурних дужок (Brace Expansion)
Це потужний механізм генерації довільних рядків, який часто плутають із метасимволами. Він працює ще до того, як команда почне шукати файли.

Масове створення:
- `mkdir -p project/{src,bin,lib,docs}` — створить одразу 4 підпапки в директорії project.
- `touch file_{1..10}.txt` — миттєво створить 10 файлів від file_1.txt до file_10.txt.

Резервне копіювання:
- `cp config.conf{,.bak}` — швидкий спосіб зробити бекап. Розгорнеться в: `cp config.conf config.conf.bak`.

### 1.11. Спеціальні випадки та комбінації

#### А. Копіювання вмісту папки (символ /)

Важливий нюанс у командах `cp` та `rsync`:
- `cp -r folder1 folder2` — скопіює папку folder1 всередину folder2.
- `cp -r folder1/. folder2` — скопіює тільки вміст folder1 безпосередньо в folder2.

#### Б. Робота з іменами, що містять пробіли
Якщо файл називається `My Report.pdf`, команда `rm My Report.pdf` видасть помилку (вона спробує видалити два різні файли: `My` та `Report.pdf`).
- Екранування: `rm My\ Report.pdf` (зворотний слеш перед пробілом).
- Лапки: `rm "My Report.pdf"`.
- Автодоповнення: Натисніть клавішу Tab після перших літер — термінал сам підставить слеші або лапки.

#### В. "Розумне" видалення та безпека
Якщо потрібно видалити все в папці, крім одного файлу (у Bash має бути увімкнено `extglob`):
- `rm !(important.txt)` — видалити все, крім `important.txt`.
- Безпечне видалення: Багато системних адміністраторів замість rm використовують `mv file ~/.trash/` або встановлюють утиліту `trash-cli`, щоб мати можливість відновити файли.

#### Г. Потужне перейменування (rename / mmv)
Якщо mv вміє перейменовувати лише по одному файлу, то спеціальна утиліта rename (або prename) використовує регулярні вирази:
- `rename 's/\.htm$/\.html/' *.htm` — масово змінить розширення всіх файлів з .htm на .html.

### 1.12. Перевірка дискового простору в дереві
Перед масовим копіюванням чи видаленням корисно знати "вагу" гілок дерева:

du (Disk Usage):
- `du -sh *` — покаже розмір кожної папки та файлу в поточному каталозі у "людському" форматі.
- `du -ch | tail -1` — покаже загальну вагу всього дерева папок.
