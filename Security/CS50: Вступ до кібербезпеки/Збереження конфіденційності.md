# Збереження конфіденційності

Це вступ до кібербезпеки від CS50.
Сьогодні розглянемо, якою інформацією ми ділимося, інколи навіть без нашого відома, та обговоримо як можемо контролювати приватність.

## Історія перегляду вебсторінок
Історія перегляду вебсторінок — водночас і перевага, і проблема для конфіденційності.

Ви можете не хотіти, щоби хтось мав доступ до інформації про те, які вебсайти ви відвідували.

Ви можете очистити історію браузера, однак вас може відключити від усіх сервісів.

На серверах зазвичай є журнали, які відстежують дії користувачів. Тому, навіть коли ви очищаєте історію браузера, сервери зберігають інформацію про те, до чого ви мали доступ.

Журнал сервера може виглядати ось так:

```bash
log_format combined '$remote_addr - $remote_user [$time_local] '
                  '"$request" $status $body_bytes_sent '
                  '"$http_referer" "$http_user_agent"';
```

Зауважте, що тут розміщена ваша IP-адреса, місцевий час та інші дані, які передаються між комп'ютерами у цифрових конвертах.

Як ви можете контролювати, чим саме ділитися?

## Заголовки HTTP
Як ми вже говорили, заголовки HTTP — це пари ключ-значення, які передаються між вашим комп'ютером і сервером.

Розглянемо наведену URL-адресу, на яку можна перейти за посиланням із цього коду HTML.
```html
<a href="https://example.com">cats</a>
```

Цей HTML-файл містить посилання під назвою cats. Воно перенаправляє користувача на сайт example.com.

Коли ви заходите на вебсайт, браузер за замовчуванням зберігає посилання, яке вас на нього привело.

Коли ви натискаєте на посилання, браузер ділиться з вебсайтами інформацією про те, який вебсайт вас на нього спрямував. Відповідно, від браузера на сервер передається наступний заголовок:
```shell
Referer: https://www.google.com/search?q=cats
```
Зауважте, що цей заголовок містить інформацію про те, що ви шукали.

Хіба не було б добре мати можливість приховувати те, що поширюється?

Поміркуймо ось над чим:
```shell
Referer: https://www.google.com/
```

Зауважте, що вказано лише пошуковик, а не конкретний запит, за яким ви шукали.

Наведені метатеги можна додати на ваш сайт, щоби обмежити доступ до інформації про походження трафіку.
```html
<meta name="referrer" content="origin">
```

Зауважте, що атрибуту content присвоєно значення origin (походження).

Ви можете ще більше обмежити цей атрибут, якщо додасте на свій сайт ось це, щоби не надавати інформацію про реферала.
```html
<meta name="referrer" content="none">
```
Зауважте, що атрибут content має значення none.

## Цифрові відбитки
Кожен браузер так чи інакше надає інформацію про те, хто ви й що робите в інтернеті.

Незалежно від обраного вами браузера, сервери зберігають ваші дії в журналах.

Завдяки цифровим відбиткам треті особи можуть ідентифікувати вас відповідно до наявних даних, навіть якщо ви обмежили доступ до якомога більшої кількості інформації у вашому браузері.

Різновидом таких даних є заголовок запиту User-Agent, де подібним чином описано ваш пристрій:
- Mozilla/5.0 (Linux; {Android Version}; {Build Tag etc.}) 
- AppleWebKit/{WebKit Rev} (KHTML, like Gecko)
- Chrome/{Chrome Rev} Mobile Safari/{WebKit Rev}

Зауважте, що ідентифіковано ваш браузер, тип ОС та пристрій.

Вебсервери також можуть визначити вашу IP-адресу і записати її в журнал.

Вебсервери також можуть визначити роздільну здатність вашого екрана, встановлені розширення, шрифти та інші дані.

З часом, коли цієї інформації більшає, вас стає легше ідентифікувати.

## Сесійні кукі

Файли кукі — наче цифровий відбиток пальця, який окреслює вашу індивідуальність.

Сесійні файли кукі — це інформація, яку сервери розміщують на вашому комп'ютері, щоби мати змогу ідентифікувати вас.

Сесійний файл кукі може виглядати ось так:
```
HTTP/3 200
Set-Cookie: session=1234abcd
```
Зауважте, що цей файл кукі повідомляє серверу, що ваш сеанс 1234abcd.

Кожна послідовність символів або номерів сеансу унікальна для кожного користувача.

Сесійні файли кукі зазвичай видаляються через певний період часу, визначений сервером.

## Кукі для відстеження
Вебсайти можуть використовувати кукі для відстеження ваших дій.

Треті особи використовують такі файли кукі, щоби відстежувати вашу поведінку на вебсайті. Розгляньмо таке:
```
Set-Cookie: _ga=GA1.2.0123456789.0; max-age=63072000
```
Зауважте, що цей файл кукі Google Analytics зберігається два роки й відстежує вашу активність на кожному новому вебсайті, на який ви заходите.

## Параметри відстеження
Якщо файли кукі заховані в середині вашого браузера, параметри відстеження можна бачити в посиланнях, за якими переходите.

Розглянемо таку URL-адресу:
```
https://example.com/ad_engagement?click_id=YmVhODI1MmZmNGU4&campaign_id=23
```
Як бачите, параметри click_id та YmVhODI1MmZmNGU4 відстежують саме вас.

Хоча файли кукі відстежуються у фоновому режимі, ви можете бачити, як посилання, які ви відвідуєте (на основі URL-адреси), можуть допомагати відстежувати вас

Браузери все активніше намагаються видаляти параметри відстеження. Розглянемо таку URL-адресу:
```
https://example.com/ad_engagement?campaign_id=23
```
Зауважте: за цим посиланням відстежується лише та кампанія, на яку ви відреагували. Параметра click_id вже немає.

## Кукі третіх сторін
Ще один тип файлів кукі — це кукі третіх сторін.

Треті сторони (тобто інші сервери або компанії) хочуть знати, як саме ви переходите з одного вебсайту на інший. Розгляньмо такий HTTP-запит:
```
GET /ad.gif HTTP/3
Host: example.com
Referer: https://harvard.edu/
```
Зауважте, що це запит отримати файл ad.gif з сайту example.com.

За замовчуванням, сервер відповідає такими заголовками:
```
HTTP/3 200
Set-Cookie: id=1234abcd; max-age=31536000
```
У заголовку відповіді Set-Cookie записується файл кукі з ідентифікатором id, який зберігається три роки.

Якщо ви перейдете на інший вебсайт, де розміщено те ж рекламне оголошення, example.com знатиме, що ви переглядаєте і harvard.edu, і yale.edu. Скажімо, пізніше ви надішлете такий HTTP-запит:
```
GET /ad.gif HTTP/3
Cookie: id=1234abcd
Host: example.com
Referer: https://yale.edu/
```
Зауважте, що сторонній файл кукі, який ви використовували раніше, id=1234abcd, зараз знову відображається на example.com та вказує на те, що ви також заходили й на yale.edu.

Кукі третіх сторін можуть використовуватися, щоби відстежувати ваші дії та монетизувати інформацію про вас.

## Приватний перегляд
Приватний перегляд може убезпечити вашу інтернет-активність.

У вікні або вкладці приватного перегляду попередні файли кукі усуваються.

Однак інтернет все ще працює так, як він працює! Тому в екосистемі вікна приватного перегляду все ж можуть створюватися файли кукі.

Що ще важливіше, сервери все ще можуть відстежувати вашу активність в межах одного сеансу перегляду.

## Суперкукі
Ваш інтернет-провайдер без вашого дозволу має можливість додати власні файли кукі у ваші HTTP-заголовки.

Можливо, за погодженням з вашим інтернет-провайдером, ви зможете відмовитися від використання суперкукі.

## DNS
Система доменних імен (DNS) — це система, яка автоматично переводить доменні імена на кшталт harvard.edu в IP-адреси.

Зазвичай DNS-трафік повністю незашифрований. Відповідно, чи не весь світ може знати, який вебсайт ви збираєтеся відвідати.

Ваш інтернет-провайдер і служби DNS точно знатимуть, куди ви намагаєтеся зайти.

Альтернативою є DNS через HTTPS або DoH, а також DNS через TLS або DoT — це сервіси, за допомогою яких ви можете шифрувати свої DNS-запити.


##Віртуальна приватна мережа (VPN)
Вже згадувана VPN дозволяє зайти в інтернет з нібито іншого пристрою.

VPN встановлює зашифроване з'єднання від вашого комп'ютера (А) і до довіреного сервера (Б). Потім сервер Б надсилає ваш запит в інтернет, тому здається, що ваш трафік з точки Б, а не з A.

VPN не захистить вас, якщо ваш комп'ютер вже уражено шкідливим програмним забезпеченням.

Завдяки VPN створюється ілюзія, що ваш трафік надходить з IP-адреси VPN, а не вашого комп'ютера.

## Tor
Tor — це програмне забезпечення, яке перенаправляє ваш трафік на вузол серверів Tor.

Трафік проходить через безліч зашифрованих вузлів.

За замовчуванням, програмне забезпечення не зберігає більшість вашої активності.

Якщо використовувати таке ПЗ, найімовірніше про вас майже нічого не можна буде дізнатися.

Однак, зауважте, що якщо ви єдиний (єдина), хто використовує Tor в локальній мережі на роботі чи навчанні, ідентифікувати вас можна буде іншими способами.

Абсолютно захищеними ви не будете з жодною технологією.

## Дозволи
Зазвичай операційні системи надсилають запити на використання певних дозволів на вашому пристрої.

Сервіси на основі геолокації за замовчуванням діляться вашим місцеперебуванням. Пам'ятайте, що Apple Maps і Google Maps дуже добре знатимуть, коли й де ви знаходитеся, якщо ви надасте їм такі дозволи.
